<!DOCTYPE html>
<!-- Website template by freewebsitetemplates.com -->
<html>
    <head>
        <meta charset="UTF-8">
        <title>GIS Anwendung</title>
        <link rel="shortcut icon" href="/assets/logo.png"/>
        <%= stylesheet_link_tag "style" %>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBzdGn7JKNFcO43RYMYRGfiXr91_b2ayuw&sensor=false"></script>
    </head>
    <body>
        <div id="header">
            <div>
                <a href="index.html" id="logo"><img src="/assets/logo.png" alt="logo"></a>
                <ul>
                    <li>
                    <a href="index.html">Home</a>
                    </li>
                    <li class="selected">
                    <a href="/students">Sch√ºler</a>
                    </li>
                    <li>
                    <a href="/teachers">Lehrer</a>
                    </li>

                </ul>
            </div>
        </div>
        <div class="topcls">
            <h2>Daten</h2>
            <%= form_tag @student do |s| %>
                <table border="0" cellpadding="0" cellspacing="10">
                    <tr>
                        <td><%=label_tag 'adresse', "Adresse*:" %></td>
                        <td><%=text_field_tag 'adresse'%></td>
                        <td><%=label_tag 'fach', "Fach*:" %></td>
                        <td><%=text_field_tag 'fach'%></td>
                    </table>
                    <br /><%= submit_tag 'Suchen' %>
                <% flash.each do |key, value| %>
                    <p><%= value %></p>
                <% end %>
            <% end %>
        </div>

        <div class="result">
            <% unless @sortedArrayByDist.nil? %>
                <% for teacher in @sortedArrayByDist %>
                    <%= teacher.vorname %>
                    <%= teacher.nachname %>
                    <%= teacher.adresse %>
                    <%= teacher.preis %>
                    <%= teacher.tel %>
                    Fahrzeit in min:
                    <%= teacher.dist/60 %> <br />
                <% end %>
            <% end %>
        </div>

        <div class='bottomcls'>

            <div id="map-canvas"></div>
            <script type="text/javascript">
                function initialize() {
                    var mapOptions = { center: new google.maps.LatLng(48.21598,16.312094), zoom: 13, mapTypeId: google.maps.MapTypeId.ROADMAP };

                    var map = new google.maps.Map(document.getElementById("map-canvas"),
                            mapOptions);

                    <% unless @sortedArrayByDist.nil? %>
                            <% for teacher in @sortedArrayByDist %>
                                var image = '/assets/Pin.png';
                                var myMarker = new google.maps.LatLng(<%=teacher.lat%>, <%=teacher.lng%>);

                                var contentString = '<strong><%=teacher.vorname%> <%=teacher.nachname%></strong>';
                                var infowindow = new google.maps.InfoWindow({ content: contentString });

                                var marker = new google.maps.Marker({ position: myMarker, icon: image, map: map, });

                                google.maps.event.addListener(marker, 'click', function() { infowindow.open(map,marker); });
                            <% end %>
                    <% end %>
                }

            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
        </div>

        <div class="cleaner"></div>

        <div id="footer">
            <div>
                <p>
                &#169; Denk &amp; Plocon 2013
                </p>

            </div>
        </div>
    </body>
</html>
